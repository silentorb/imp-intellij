import silentorb.mythic.generation.texturing.*
import silentorb.mythic.generation.drawing.*
import silentorb.mythic.math.*

let length = 512
let dimensions = Dimensions length length

let shapes = rectangle (RelativeDimensions 40.0 30.0)
    . translate (Vector2 -10.0 -10.0)

let background = seamlessColoredNoise
    dimensions = dimensions
    scale = 0.55
    octaves = 4
    roughness = 0.75
    firstColor = (RgbColor 1.0 0.5 0.4)
    secondColor = (RgbColor 0.0 0.0 0.0)

let foreground = seamlessColoredNoise
    dimensions = dimensions
    scale = 0.2
    octaves = 5
    roughness = 0.5
    firstColor = (RgbColor 0.4 1.0 0.4)
    secondColor = (RgbColor 0.0 0.0 0.0)

let shapeMask = rasterizeShapes (Bitmap 0.0 dimensions) (grayscaleFill 1.0 shapes)

let output = mask foreground background shapeMask
    . rasterizeShapes (rgbStroke (RgbColor 0.0 0.0 0.0) 5.0 shapes)
